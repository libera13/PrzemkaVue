(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AddCompositionView"],{"0160":function(t,e,a){},"408c":function(t,e,a){var r=a("2b3e"),n=function(){return r.Date.now()};t.exports=n},"4b77":function(t,e,a){"use strict";a("cc04")},"4fad":function(t,e,a){var r=a("23e7"),n=a("6f53").entries;r({target:"Object",stat:!0},{entries:function(t){return n(t)}})},"5da0":function(t,e,a){},a0da:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("MainView",{scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" Dodaj utwór ")]},proxy:!0},{key:"component",fn:function(){return[a("WorkForm")]},proxy:!0}])})},n=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"form"},[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-textarea",{attrs:{rules:t.rules.title,label:"tytuł",required:"",rows:"1","auto-grow":"",counter:"500"},model:{value:t.data.title,callback:function(e){t.$set(t.data,"title","string"===typeof e?e.trim():e)},expression:"data.title"}}),a("div",{staticClass:"form__divGrid"},[a("v-autocomplete",{attrs:{rules:t.rules.required,label:"kompozytor",required:"",items:t.fromDB.composer,"item-text":"full_name","item-value":"id"},model:{value:t.data.composer,callback:function(e){t.$set(t.data,"composer",e)},expression:"data.composer"}}),a("PersonaModalForm",{attrs:{limitAddTo:"composer"},on:{"added-composer":t.setAddedComposer}})],1),a("v-switch",{attrs:{label:"Czas powstawania utworu trwał dłużej niż rok"},model:{value:t.isCreationYearAnInterval,callback:function(e){t.isCreationYearAnInterval=e},expression:"isCreationYearAnInterval"}}),t.isCreationYearAnInterval?a("div",{staticClass:"form__divGrid-withGap"},[a("v-text-field",{attrs:{type:"number",rules:t.rules.validationStartYear,label:"rok początkowy"},on:{input:t.validateStartYear},model:{value:t.data.year_start,callback:function(e){t.$set(t.data,"year_start",t._n(e))},expression:"data.year_start"}}),a("v-text-field",{attrs:{type:"number",label:"rok końcowy",rules:t.rules.yearEnd},on:{input:t.validateStartYear},model:{value:t.data.year_end,callback:function(e){t.$set(t.data,"year_end",t._n(e))},expression:"data.year_end"}})],1):a("v-text-field",{attrs:{type:"number",label:"rok powstania",rules:t.rules.yearEnd},model:{value:t.data.year_end,callback:function(e){t.$set(t.data,"year_end",t._n(e))},expression:"data.year_end"}}),a("v-switch",{attrs:{label:"Utwór jest cykliczny"},model:{value:t.data.is_cyclical_form,callback:function(e){t.$set(t.data,"is_cyclical_form",e)},expression:"data.is_cyclical_form"}}),t.isWorkCyclical?a("div",[a("p",[t._v("Wprowadź części utworu")]),t._l(t.data.movements,(function(e,r){return a("v-text-field",{key:"movements-"+r,attrs:{type:"text",hint:"nazwa części (opcjonalna)",label:"",prefix:t.getRomanNumberFromIndex(r+1),"append-outer-icon":"mdi-plus","append-icon":t.showCorrectMovementsIcon("mdi-minus",r)},on:{"click:append-outer":function(e){return t.addMovementsField(r)},"click:append":function(e){return t.deleteMovementsField(r)}},model:{value:e.name,callback:function(a){t.$set(e,"name","string"===typeof a?a.trim():a)},expression:"item.name"}})}))],2):t._e(),a("v-autocomplete",{attrs:{rules:t.rules.required,label:"rodzaj utworu",required:"",items:t.selectData.type},model:{value:t.data.type,callback:function(e){t.$set(t.data,"type",e)},expression:"data.type"}}),a("v-autocomplete",{attrs:{rules:t.rules.required,label:"kategoria",required:"",items:t.fromDB.category,"item-text":"name","item-value":"id"},model:{value:t.data.category,callback:function(e){t.$set(t.data,"category",e)},expression:"data.category"}}),t.isCategorySelected?[t.isWorkCategorySolo?[a("div",{staticClass:"form__divGrid"},[a("v-autocomplete",{attrs:{rules:t.rules.required,label:"instrument",required:"",items:t.fromDB.instrument,"item-text":"name","item-value":"id",chips:"","deletable-chips":""},model:{value:t.data.instrument,callback:function(e){t.$set(t.data,"instrument",e)},expression:"data.instrument"}}),a("InstrumentModalForm",{on:{"added-instrument":t.setAddedInstrument}})],1),t.isWorkCategorySolo?a("div",{staticClass:"form__divGrid"},[a("v-autocomplete",{attrs:{label:"artysta",required:"",items:t.fromDB.artists,"item-text":"full_name","item-value":"id",chips:"","deletable-chips":""},model:{value:t.data.artist,callback:function(e){t.$set(t.data,"artist",e)},expression:"data.artist"}}),a("PersonaModalForm",{attrs:{limitAddTo:"artist"},on:{"added-artist":t.setAddedArtist}})],1):t._e()]:[a("div",{staticClass:"form__divGrid"},[a("v-autocomplete",{attrs:{rules:t.rules.required,label:"skład instrumentalny",required:"",items:t.instrumentsCompositionsWithCountedInstruments,"item-text":"name","item-value":"id",chips:"","deletable-chips":""},scopedSlots:t._u([{key:"item",fn:function(e){return[[a("v-list-item-content",[a("v-list-item-title",{domProps:{innerHTML:t._s(e.item.name)}}),t._l(e.item.instrument,(function(e){return a("v-list-item-subtitle",{key:"key-v-list-item-subtitle-"+e[0]},[t._v(" "+t._s(e[1])+" "+t._s(e[0])+" ")])}))],2)]]}}],null,!1,3213485945),model:{value:t.data.instrumental_composition,callback:function(e){t.$set(t.data,"instrumental_composition",e)},expression:"data.instrumental_composition"}}),a("InstrumentalCompositionModalForm",{on:{"added-instrumental-composition":t.setAddedInstrumentalComposition}})],1),a("v-switch",{attrs:{label:"zespół muzyczny"},model:{value:t.isArtistsAnMusicalGroup,callback:function(e){t.isArtistsAnMusicalGroup=e},expression:"isArtistsAnMusicalGroup"}}),t.isArtistsAnMusicalGroup?a("div",{staticClass:"form__divGrid"},[a("v-autocomplete",{attrs:{label:"zespół muzyczny (opcjonalny)",required:"",items:t.fromDB.musicalGroups,"item-text":"name","item-value":"id",chips:"","deletable-chips":""},model:{value:t.data.musicalGroups,callback:function(e){t.$set(t.data,"musicalGroups",e)},expression:"data.musicalGroups"}}),a("MusicalGroupModalForm",{on:{"added-musical-group":t.setAddedMusicalGroup}})],1):a("div",{staticClass:"form__divGrid"},[a("v-autocomplete",{attrs:{label:"artyści",required:"",items:t.fromDB.artists,"item-text":"full_name","item-value":"id",multiple:"",chips:"","deletable-chips":""},model:{value:t.data.artists,callback:function(e){t.$set(t.data,"artists",e)},expression:"data.artists"}}),a("PersonaModalForm",{attrs:{limitAddTo:"artist"},on:{"added-artist":t.setAddedArtist}})],1)]]:t._e(),a("v-switch",{attrs:{label:"Znany jest tylko rok prawykonania"},model:{value:t.data.is_only_year,callback:function(e){t.$set(t.data,"is_only_year",e)},expression:"data.is_only_year"}}),a("v-text-field",{attrs:{type:t.data.is_only_year?"number":"date",label:"data prawykonania (opcjonalnie)"},model:{value:t.data.first_performance_date,callback:function(e){t.$set(t.data,"first_performance_date",e)},expression:"data.first_performance_date"}}),a("v-textarea",{attrs:{label:"miejsce prawykonania (opcjonalnie)",rows:"1","auto-grow":"",counter:"500"},model:{value:t.data.firstPerformancePlace,callback:function(e){t.$set(t.data,"firstPerformancePlace",e)},expression:"data.firstPerformancePlace"}}),a("div",{staticClass:"form__durationBox"},[a("label",{attrs:{for:"duration"}},[t._v("Czas trwania (hh:mm:ss) (opcjonalnie)")]),a("a-time-picker",{attrs:{id:"duration","default-value":t.moment("00:00:00","HH:mm:ss"),open:t.openTimePicker},on:{openChange:t.handleOpenChangeDuration,change:t.changeDuration}})],1),a("v-textarea",{attrs:{label:"dedykacja (opcjonalnie)",rows:"1","auto-grow":"",counter:"500"},model:{value:t.data.dedication,callback:function(e){t.$set(t.data,"dedication","string"===typeof e?e.trim():e)},expression:"data.dedication"}}),a("v-textarea",{attrs:{label:"wydawnictwo (opcjonalnie)",rows:"1","auto-grow":"",counter:"500"},model:{value:t.data.publisher,callback:function(e){t.$set(t.data,"publisher","string"===typeof e?e.trim():e)},expression:"data.publisher"}}),a("v-textarea",{attrs:{label:"informacje dodatkowe (opcjonalnie)",rows:"1","auto-grow":"",counter:"1000"},model:{value:t.data.additionalInformation,callback:function(e){t.$set(t.data,"additionalInformation","string"===typeof e?e.trim():e)},expression:"data.additionalInformation"}}),a("v-text-field",{attrs:{type:"number",label:"Wersja utworu",rules:t.rules.required},model:{value:t.data.version,callback:function(e){t.$set(t.data,"version",t._n(e))},expression:"data.version"}}),a("v-btn",{staticClass:"mr-4",attrs:{disabled:!t.valid,color:"success"},on:{click:t.submit}},[t._v(" Wyślij ")]),a("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:t.reset}},[t._v(" Reset ")]),a("v-btn",{staticClass:"mr-4",attrs:{disabled:t.valid,color:"success"},on:{click:t.validate}},[t._v(" Sprawdź ")])],2)],1),t.versionWorksFilteredByTheSameTitle.length>0?a("v-card",{staticClass:"version-box",attrs:{shaped:""}},[a("v-card-text",[a("div",{staticClass:"font-weight-bold ml-8 mb-2"},[t._v(" Podobne utwory ")]),a("v-timeline",{attrs:{"align-top":"",dense:""}},t._l(t.versionWorksFilteredByTheSameTitle,(function(e){return a("v-timeline-item",{key:Math.random()+e.title,attrs:{color:"#2e2e2f",small:""}},[a("div",[a("div",{staticClass:"font-weight-normal"},[a("strong",[t._v(t._s(e.composer.full_name))]),t._v(" v."+t._s(e.version)+" ")]),a("div",[t._v(t._s(e.title))])])])})),1)],1)],1):t._e()],1)},o=[],s=(a("4de4"),a("7db0"),a("4160"),a("d81d"),a("a434"),a("b0c0"),a("4fad"),a("159b"),a("96cf"),a("1da1")),l=a("5530"),c=a("c1df"),u=a.n(c),d=a("16c8"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"info",small:""}},"v-btn",n,!1),r),[t._v(" Dodaj instrument ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Dodaj instrument")])]),a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{rules:t.rules.required,label:"Nazwa"},model:{value:t.data.name,callback:function(e){t.$set(t.data,"name","string"===typeof e?e.trim():e)},expression:"data.name"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{rules:t.rules.required,label:"Skrót (włoski)"},model:{value:t.data.abbreviation,callback:function(e){t.$set(t.data,"abbreviation","string"===typeof e?e.trim():e)},expression:"data.abbreviation"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Zamknij ")]),a("v-btn",{attrs:{disabled:!t.valid,color:"success",text:""},on:{click:t.submit}},[t._v(" Wyślij ")])],1)],1)],1)],1)],1)},f=[],p=(a("d3b7"),a("0792")),v={name:"InstrumentModalForm",data:function(){return{dialog:!1,valid:!1,data:{name:"",abbreviation:""},rules:{required:[p["e"]]}}},methods:{validate:function(){this.$refs.form.validate()},submit:function(){this.$refs.form.validate(),this.valid&&(this.sendDataToDB(this.data),this.dialog=!1)},reset:function(){this.$refs.form.reset()},sendDataToDB:function(t){var e=this;d["a"].post("/instruments/",JSON.stringify(t)).then((function(t){var a=t.data;e.$emit("added-instrument",a.id),e.$notify({group:"app",type:"success",text:"Pomyslnie dodano instrument!"})})).catch((function(t){e.$notify({group:"app",type:"error",text:"Podczas dodawania instrumentu wystąpił błąd!"}),console.log("new Error",t)})).finally((function(){return e.reset()}))}}},h=v,g=a("2877"),b=a("6544"),y=a.n(b),_=a("8336"),x=a("b0af"),w=a("99d9"),k=a("62ad"),C=a("a523"),D=a("169a"),$=a("4bd4"),j=a("0fd9"),V=a("2fa4"),B=a("8654"),A=Object(g["a"])(h,m,f,!1,null,"ed6e00a4",null),T=A.exports;y()(A,{VBtn:_["a"],VCard:x["a"],VCardActions:w["a"],VCardText:w["b"],VCardTitle:w["c"],VCol:k["a"],VContainer:C["a"],VDialog:D["a"],VForm:$["a"],VRow:j["a"],VSpacer:V["a"],VTextField:B["a"]});var I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"info",small:""}},"v-btn",n,!1),r),[t._v(" Dodaj kategorię ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Dodaj kategorię")])]),a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{rules:t.rules.required,label:"Nazwa"},model:{value:t.data.name,callback:function(e){t.$set(t.data,"name","string"===typeof e?e.trim():e)},expression:"data.name"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Zamknij ")]),a("v-btn",{attrs:{disabled:!t.valid,color:"success",text:""},on:{click:t.submit}},[t._v(" Wyślij ")])],1)],1)],1)],1)],1)},F=[],O={name:"CategoryModalForm",data:function(){return{dialog:!1,valid:!1,data:{name:""},rules:{required:[p["e"]]}}},methods:{validate:function(){this.$refs.form.validate()},submit:function(){this.$refs.form.validate(),this.valid&&(this.sendDataToDB(this.data),this.dialog=!1)},reset:function(){this.$refs.form.reset()},sendDataToDB:function(t){var e=this;d["a"].post("/categories/",JSON.stringify(t)).then((function(){e.$emit("added-category",e.data.name),e.$notify({group:"app",type:"success",text:"Pomyslnie dodano kategorię!"})})).catch((function(t){e.$notify({group:"app",type:"error",text:"Podczas dodawania kategorii wystąpił błąd!"}),console.log("new Error",t)})).finally((function(){return e.reset()}))}}},M=O,R=Object(g["a"])(M,I,F,!1,null,"80f5e92c",null),S=R.exports;y()(R,{VBtn:_["a"],VCard:x["a"],VCardActions:w["a"],VCardText:w["b"],VCardTitle:w["c"],VCol:k["a"],VContainer:C["a"],VDialog:D["a"],VForm:$["a"],VRow:j["a"],VSpacer:V["a"],VTextField:B["a"]});var z=a("fa7d"),G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"info",small:""}},"v-btn",n,!1),r),[t._v(" "+t._s(t.getText)+" ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.getText))])]),a("PersonaForm",{attrs:{"is-in-modal":"","limit-add-to":t.limitAddTo},on:{"dialog-open":t.toggleDialog,"added-artist":function(e){return t.$emit("added-artist",e)},"added-composer":function(e){return t.$emit("added-composer",e)}}})],1)],1)],1)},N=[],q=a("d601"),P={name:"PersonaModalForm",components:{PersonaForm:q["a"]},props:{limitAddTo:{type:String}},data:function(){return{dialog:!1}},computed:{getText:function(){return this.onlyArtists?"Dodaj artystę":this.onlyComposers?"Dodaj kompozytora":"Dodaj"},onlyArtists:function(){return"artist"===this.limitAddTo},onlyComposers:function(){return"composer"===this.limitAddTo}},methods:{toggleDialog:function(t){this.dialog=t}}},E=P,W=Object(g["a"])(E,G,N,!1,null,"0b17a827",null),L=W.exports;y()(W,{VBtn:_["a"],VCard:x["a"],VCardTitle:w["c"],VDialog:D["a"],VRow:j["a"]});var Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"info",small:""}},"v-btn",n,!1),r),[t._v(" Dodaj zespół muzyczny ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Dodaj zespół muzyczny")])]),a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-card-text",[a("v-text-field",{attrs:{rules:t.rules.required,label:"Nazwa",required:""},model:{value:t.data.name,callback:function(e){t.$set(t.data,"name","string"===typeof e?e.trim():e)},expression:"data.name"}}),a("v-textarea",{attrs:{label:"Krótka biografia",rules:t.rules.required_maxLength250,required:"",rows:"1","auto-grow":"",counter:"250"},model:{value:t.data.short_biography,callback:function(e){t.$set(t.data,"short_biography","string"===typeof e?e.trim():e)},expression:"data.short_biography"}}),a("v-textarea",{attrs:{label:"Biografia",rules:t.rules.maxLength1000,required:"",rows:"1","auto-grow":"",counter:"1000"},model:{value:t.data.biography,callback:function(e){t.$set(t.data,"biography","string"===typeof e?e.trim():e)},expression:"data.biography"}}),a("div",{staticClass:"form__divGrid"},[a("v-autocomplete",{attrs:{label:"artyści",required:"",items:t.fromDB.artists,"item-text":"full_name","item-value":"id",multiple:"",chips:"","deletable-chips":""},model:{value:t.data.artists,callback:function(e){t.$set(t.data,"artists",e)},expression:"data.artists"}}),a("PersonaModalForm",{attrs:{limitAddTo:"artist"},on:{"added-artist":t.setAddedArtist}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Zamknij ")]),a("v-btn",{attrs:{disabled:!t.valid,color:"success",text:""},on:{click:t.submit}},[t._v(" Wyślij ")])],1)],1)],1)],1)],1)},J=[],U={name:"MusicalGroupModalForm",components:{PersonaModalForm:L},data:function(){return{dialog:!1,valid:!1,data:{name:"",short_biography:"",biography:"",artists:null},fromDB:{artists:[]},rules:{required:[p["e"]],maxLength1000:[p["b"]],required_maxLength250:[p["c"],p["e"]]}}},mounted:function(){this.getArtistsNames()},methods:{validate:function(){this.$refs.form.validate()},submit:function(){this.$refs.form.validate(),this.valid&&(this.sendDataToDB(this.data),this.dialog=!1)},reset:function(){this.$refs.form.reset()},sendDataToDB:function(t){var e=this;d["a"].post("/musicalGroups/",JSON.stringify(t)).then((function(t){var a=t.data;e.$emit("added-musical-group",a.id),e.$notify({group:"app",type:"success",text:"Pomyslnie dodano zespół muzyczny!"})})).catch((function(t){e.$notify({group:"app",type:"error",text:"Podczas dodawania zespołu muzycznego wystąpił błąd!"}),console.log("new Error",t)})).finally((function(){return e.reset()}))},setAddedArtist:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getArtistsNames();case 2:e.fromDB.artists=a.sent,e.data.artists.push(t);case 4:case"end":return a.stop()}}),a)})))()},getArtistsNames:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].get("/artists/");case 2:return a=e.sent,r=a.data,t.fromDB.artists=r,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))()}}},Z=U,H=a("c6a6"),K=a("a844"),Q=Object(g["a"])(Z,Y,J,!1,null,"d19ebfdc",null),X=Q.exports;y()(Q,{VAutocomplete:H["a"],VBtn:_["a"],VCard:x["a"],VCardActions:w["a"],VCardText:w["b"],VCardTitle:w["c"],VDialog:D["a"],VForm:$["a"],VRow:j["a"],VSpacer:V["a"],VTextField:B["a"],VTextarea:K["a"]});var tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{scrollable:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"info",small:""}},"v-btn",n,!1),r),[t._v(" Dodaj skład instrum... ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{height:"80vh"}},[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Dodaj skład instrumentalny")])]),a("v-card-text",[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.rules.required,label:"Nazwa",required:""},model:{value:t.data.name,callback:function(e){t.$set(t.data,"name","string"===typeof e?e.trim():e)},expression:"data.name"}}),a("div",{staticClass:"form__divGrid-withGap"},[t._l(t.data.instrument,(function(e,r){return a("v-autocomplete",{key:"movements-"+r,attrs:{rules:t.rules.required,label:"Instrument",required:"",items:t.fromDB.instrument,"item-text":"name","item-value":"id",chips:"","deletable-chips":"","append-outer-icon":"mdi-plus","append-icon":t.showCorrectIcon("mdi-minus",r)},on:{"click:append-outer":function(e){return t.addField(r)},"click:append":function(e){return t.deleteField(r)}},model:{value:e.id,callback:function(a){t.$set(e,"id",a)},expression:"item.id"}})})),a("InstrumentModalForm",{on:{"added-instrument":t.setAddedInstrument}})],2)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Zamknij ")]),a("v-btn",{attrs:{disabled:!t.valid,color:"success",text:""},on:{click:t.submit}},[t._v(" Wyślij ")])],1)],1)],1)],1)},et=[],at={name:"InstrumentalCompositionModalForm",components:{InstrumentModalForm:T},data:function(){return{dialog:!1,valid:!1,rules:{required:[p["e"]]},data:{name:"",instrument:[{id:null}]},fromDB:{instrument:[]}}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getInstrumentsNames();case 1:case"end":return e.stop()}}),e)})))()},methods:{validate:function(){this.$refs.form.validate()},submit:function(){if(this.$refs.form.validate(),this.valid){var t=Object(l["a"])({},this.data);Array.isArray(t.instrument)&&(t.instrument=this.mapIdsListToList(t.instrument)),this.sendDataToDB(t),this.dialog=!1}},reset:function(){this.$refs.form.reset()},mapIdsListToList:function(t){return t.map((function(t){return t.id}))},sendDataToDB:function(t){var e=this;d["a"].post("/instrumental_composition/",JSON.stringify(t)).then((function(t){var a=t.data;e.$emit("added-instrumental-composition",a.id),e.$notify({group:"app",type:"success",text:"Pomyslnie dodano skład instrumentalny!"})})).catch((function(t){e.$notify({group:"app",type:"error",text:"Podczas dodawania składu instrumentalnego wystąpił błąd!"}),console.log("new Error",t)})).finally((function(){return e.reset()}))},getInstrumentsNames:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].get("/instruments/");case 2:return a=e.sent,r=a.data,t.fromDB.instrument=r,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))()},setAddedInstrument:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getInstrumentsNames();case 2:e.fromDB.instrument=a.sent,r={id:t},e.data.instrument.push(r);case 5:case"end":return a.stop()}}),a)})))()},showCorrectIcon:function(t,e){return 0===e?"":t},addField:function(t){var e={id:null};this.data.instrument.splice(t+1,0,e)},deleteField:function(t){this.data.instrument.splice(t,1)}}},rt=at,nt=(a("4b77"),Object(g["a"])(rt,tt,et,!1,null,"504b7f5e",null)),it=nt.exports;y()(nt,{VAutocomplete:H["a"],VBtn:_["a"],VCard:x["a"],VCardActions:w["a"],VCardText:w["b"],VCardTitle:w["c"],VDialog:D["a"],VForm:$["a"],VRow:j["a"],VSpacer:V["a"],VTextField:B["a"]});var ot=a("b047c"),st=a.n(ot),lt={title:"",composer:"",year_start:2020,year_end:2020,is_cyclical_form:!1,movements:[{name:""}],type:null,category:null,instrument:1,instrumental_composition:[],artists:[],artist:null,musicalGroups:null,publisher:"",additionalInformation:null,duration:null,first_performance_date:null,is_only_year:!1,firstPerformancePlace:"",dedication:"",parts:null,version:1},ct={name:"WorkForm",components:{InstrumentalCompositionModalForm:it,MusicalGroupModalForm:X,PersonaModalForm:L,CategoryModalForm:S,InstrumentModalForm:T},data:function(){return{valid:!1,data:Object(l["a"])({},lt),rules:{required:[p["e"]],emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}],title:[p["e"],p["d"]],validationStartYear:[!0],yearEnd:[p["a"],p["e"]]},selectData:{type:["Utwór koncertowy","Utwór pedagogiczny","Utwór koncertowy, Utwór pedagogiczny"]},fromDB:{composer:[],category:[],instrument:[],instrumental_composition:[],artists:[],musicalGroups:[]},openTimePicker:!1,isCreationYearAnInterval:!1,isArtistsAnMusicalGroup:!1,versionWorksFromDB:[]}},mounted:function(){this.getComposersNames(),this.getCategoriesNames(),this.getInstrumentsNames(),this.getInstrumentalCompositionNames(),this.getArtistsNames(),this.getMusicalGroupsNames()},computed:{isWorkCyclical:function(){return this.data.is_cyclical_form},isWorkCategorySolo:function(){return this.data.category===this.getIdOfCategorySoloFromDB},dateYearEnd:function(){return this.data.year_end},selectedCategories:function(){return this.data.category},isCategorySelected:function(){return this.data.category},dataTitle:function(){return this.data.title},dataIsOnlyYear:function(){return this.data.is_only_year},getIdOfCategorySoloFromDB:function(){var t=this.fromDB.category.find((function(t){return"utwór solowy"===t.name}));return null===t||void 0===t?void 0:t.id},instrumentsCompositionsWithCountedInstruments:function(){var t=this;return this.fromDB.instrumental_composition.map((function(e){return e.instrument=t.uniqueCounts(e.instrument),e}))},versionWorksFilteredByTheSameTitle:function(){var t=this;return this.data.title<=3?[]:this.versionWorksFromDB.filter((function(e){return e.title.toLowerCase()===t.data.title.toLowerCase()}))}},watch:{dateYearEnd:{immediate:!1,handler:function(t){this.isCreationYearAnInterval||(this.data.year_start=t)}},selectedCategories:{immediate:!1,handler:function(t){this.isWorkCategorySolo?(this.data.artists=[],this.data.musicalGroups=null,this.data.instrumental_composition=[]):(this.data.artist=null,this.data.instrument=null)}},isArtistsAnMusicalGroup:{immediate:!1,handler:function(t){t?this.data.musicalGroups=null:this.data.artists=[]}},dataTitle:{immediate:!0,handler:function(t){this.debounceInput(t)}},dataIsOnlyYear:{immediate:!0,handler:function(t){this.data.first_performance_date=null}}},methods:{moment:u.a,validate:function(){this.$refs.form.validate()},submit:function(){if(this.$refs.form.validate(),this.valid){var t=this.makeLogicBeforeSend(this.data);this.sendDataToDB(t)}},makeLogicBeforeSend:function(t){var e=Object(l["a"])({},t);return e.movements=Object(l["a"])({},e.movements),e.movements=JSON.stringify(e.movements),this.isWorkCyclical||delete e.movements,"number"===typeof e.instrument?e.instrument=[e.instrument]:e.instrument||(e.instrument=[]),"number"===typeof e.instrumental_composition&&(e.instrumental_composition=[e.instrumental_composition]),e.is_only_year&&(e.first_performance_date="".concat(e.first_performance_date,"-09-01")),e},reset:function(){this.$refs.form.reset(),this.data=Object(l["a"])({},lt)},resetValidation:function(){this.$refs.form.resetValidation()},sendDataToDB:function(t){var e=this;d["a"].post("/work/",JSON.stringify(t)).then((function(){e.$notify({group:"app",type:"success",text:"Pomyslnie dodano utwór!"}),e.reset()})).catch((function(t){e.$notify({group:"app",type:"error",text:"Podczas dodawania utworu wystąpił błąd!"}),console.log("new Error",t)}))},getComposersNames:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].get("/composers/");case 2:return a=e.sent,r=a.data,t.fromDB.composer=r,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))()},getCategoriesNames:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].get("/categories/");case 2:return a=e.sent,r=a.data,t.fromDB.category=r,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))()},getInstrumentsNames:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].get("/instruments/");case 2:return a=e.sent,r=a.data,t.fromDB.instrument=r,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))()},getInstrumentalCompositionNames:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].get("/instrumental_composition/");case 2:return a=e.sent,r=a.data,t.fromDB.instrumental_composition=r,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))()},getArtistsNames:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].get("/artists/");case 2:return a=e.sent,r=a.data,t.fromDB.artists=r,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))()},getMusicalGroupsNames:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].get("/musicalGroups/");case 2:return a=e.sent,r=a.data,t.fromDB.musicalGroups=r,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))()},setAddedComposer:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getComposersNames();case 2:e.fromDB.composer=a.sent,e.data.composer=t;case 4:case"end":return a.stop()}}),a)})))()},setAddedInstrument:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getInstrumentsNames();case 2:e.fromDB.instrument=a.sent,e.data.instrument=t;case 4:case"end":return a.stop()}}),a)})))()},setAddedInstrumentalComposition:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getInstrumentalCompositionNames();case 2:e.fromDB.instrumental_composition=a.sent,e.data.instrumental_composition=t;case 4:case"end":return a.stop()}}),a)})))()},setAddedCategory:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getCategoriesNames();case 2:e.fromDB.category=a.sent,e.data.category=t;case 4:case"end":return a.stop()}}),a)})))()},setAddedArtist:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getArtistsNames();case 2:e.fromDB.artists=a.sent,e.isWorkCategorySolo?e.data.artists=t:e.data.artists.push(t);case 4:case"end":return a.stop()}}),a)})))()},setAddedMusicalGroup:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getMusicalGroupsNames();case 2:e.fromDB.musicalGroups=a.sent,e.data.musicalGroups=t;case 4:case"end":return a.stop()}}),a)})))()},getRomanNumberFromIndex:z["b"],showCorrectMovementsIcon:function(t,e){return 0===e?"":t},addMovementsField:function(t){var e={name:""};this.data.movements.splice(t+1,0,e)},deleteMovementsField:function(t){this.data.movements.splice(t,1)},validateStartYear:function(){var t=this.data.year_start<=this.data.year_end;this.rules.validationStartYear=t?[!0]:["Rok początkowy nie może być większy od końcowego"]},handleOpenChangeDuration:function(t){this.openTimePicker=t},changeDuration:function(t,e){this.data.duration=e},uniqueCounts:function(t){var e={};return t&&t.forEach((function(t){e[t.abbreviation]=(e[t.abbreviation]||0)+1})),Object.entries(e)},debounceInput:st()(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a={title:e},!(e.length<=3)){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,d["a"].get("/work/",{params:a});case 6:r=t.sent,n=r.data,this.versionWorksFromDB=n,t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](3),this.$notify({group:"app",type:"error",text:"Podczas ładowania wersji wystąpił błąd!"}),console.log("new Error",t.t0);case 15:case"end":return t.stop()}}),t,this,[[3,11]])})));return function(e){return t.apply(this,arguments)}}(),3e3)}},ut=ct,dt=(a("de4c"),a("5d23")),mt=a("b73d"),ft=(a("0160"),a("58df")),pt=a("7560"),vt=Object(ft["a"])(pt["a"]).extend({name:"v-timeline",provide:function(){return{timeline:this}},props:{alignTop:Boolean,dense:Boolean,reverse:Boolean},computed:{classes:function(){return Object(l["a"])({"v-timeline--align-top":this.alignTop,"v-timeline--dense":this.dense,"v-timeline--reverse":this.reverse},this.themeClasses)}},render:function(t){return t("div",{staticClass:"v-timeline",class:this.classes},this.$slots.default)}}),ht=(a("c96a"),a("9d26")),gt=a("a9ad"),bt=Object(ft["a"])(gt["a"],pt["a"]),yt=bt.extend().extend({name:"v-timeline-item",inject:["timeline"],props:{color:{type:String,default:"primary"},fillDot:Boolean,hideDot:Boolean,icon:String,iconColor:String,large:Boolean,left:Boolean,right:Boolean,small:Boolean},computed:{hasIcon:function(){return!!this.icon||!!this.$slots.icon}},methods:{genBody:function(){return this.$createElement("div",{staticClass:"v-timeline-item__body"},this.$slots.default)},genIcon:function(){return this.$slots.icon?this.$slots.icon:this.$createElement(ht["a"],{props:{color:this.iconColor,dark:!this.theme.isDark,small:this.small}},this.icon)},genInnerDot:function(){var t=this.setBackgroundColor(this.color);return this.$createElement("div",Object(l["a"])({staticClass:"v-timeline-item__inner-dot"},t),[this.hasIcon&&this.genIcon()])},genDot:function(){return this.$createElement("div",{staticClass:"v-timeline-item__dot",class:{"v-timeline-item__dot--small":this.small,"v-timeline-item__dot--large":this.large}},[this.genInnerDot()])},genDivider:function(){var t=[];return this.hideDot||t.push(this.genDot()),this.$createElement("div",{staticClass:"v-timeline-item__divider"},t)},genOpposite:function(){return this.$createElement("div",{staticClass:"v-timeline-item__opposite"},this.$slots.opposite)}},render:function(t){var e=[this.genBody(),this.genDivider()];return this.$slots.opposite&&e.push(this.genOpposite()),t("div",{staticClass:"v-timeline-item",class:Object(l["a"])({"v-timeline-item--fill-dot":this.fillDot,"v-timeline-item--before":this.timeline.reverse?this.right:this.left,"v-timeline-item--after":this.timeline.reverse?this.left:this.right},this.themeClasses)},e)}}),_t=Object(g["a"])(ut,i,o,!1,null,"543b3bc0",null),xt=_t.exports;y()(_t,{VAutocomplete:H["a"],VBtn:_["a"],VCard:x["a"],VCardText:w["b"],VForm:$["a"],VListItemContent:dt["a"],VListItemSubtitle:dt["b"],VListItemTitle:dt["c"],VSwitch:mt["a"],VTextField:B["a"],VTextarea:K["a"],VTimeline:vt,VTimelineItem:yt});var wt=a("2498"),kt={name:"AddCompositionView",components:{MainView:wt["a"],WorkForm:xt}},Ct=kt,Dt=Object(g["a"])(Ct,r,n,!1,null,"b9acb0d2",null);e["default"]=Dt.exports},b047c:function(t,e,a){var r=a("1a8c"),n=a("408c"),i=a("b4b0"),o="Expected a function",s=Math.max,l=Math.min;function c(t,e,a){var c,u,d,m,f,p,v=0,h=!1,g=!1,b=!0;if("function"!=typeof t)throw new TypeError(o);function y(e){var a=c,r=u;return c=u=void 0,v=e,m=t.apply(r,a),m}function _(t){return v=t,f=setTimeout(k,e),h?y(t):m}function x(t){var a=t-p,r=t-v,n=e-a;return g?l(n,d-r):n}function w(t){var a=t-p,r=t-v;return void 0===p||a>=e||a<0||g&&r>=d}function k(){var t=n();if(w(t))return C(t);f=setTimeout(k,x(t))}function C(t){return f=void 0,b&&c?y(t):(c=u=void 0,m)}function D(){void 0!==f&&clearTimeout(f),v=0,c=p=u=f=void 0}function $(){return void 0===f?m:C(n())}function j(){var t=n(),a=w(t);if(c=arguments,u=this,p=t,a){if(void 0===f)return _(p);if(g)return clearTimeout(f),f=setTimeout(k,e),y(p)}return void 0===f&&(f=setTimeout(k,e)),m}return e=i(e)||0,r(a)&&(h=!!a.leading,g="maxWait"in a,d=g?s(i(a.maxWait)||0,e):d,b="trailing"in a?!!a.trailing:b),j.cancel=D,j.flush=$,j}t.exports=c},b4b0:function(t,e,a){var r=a("1a8c"),n=a("ffd6"),i=NaN,o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;function d(t){if("number"==typeof t)return t;if(n(t))return i;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var a=l.test(t);return a||c.test(t)?u(t.slice(2),a?2:8):s.test(t)?i:+t}t.exports=d},cc04:function(t,e,a){},de4c:function(t,e,a){"use strict";a("5da0")},ffd6:function(t,e,a){var r=a("3729"),n=a("1310"),i="[object Symbol]";function o(t){return"symbol"==typeof t||n(t)&&r(t)==i}t.exports=o}}]);
//# sourceMappingURL=AddCompositionView.040e53ad.js.map